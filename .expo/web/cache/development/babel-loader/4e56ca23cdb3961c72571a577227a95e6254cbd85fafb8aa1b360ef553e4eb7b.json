{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport axios from 'axios';\nimport { formatISO, format } from 'date-fns';\nimport { SERVER_URL } from \"../utils/tasks\";\nimport { taskEventEmitter } from \"../Events\";\nexport function updateTaskStatus(_x, _x2) {\n  return _updateTaskStatus.apply(this, arguments);\n}\nfunction _updateTaskStatus() {\n  _updateTaskStatus = _asyncToGenerator(function* (taskId, taskData) {\n    try {\n      var response = yield axios.put(`${SERVER_URL}/tasks/${taskId}`, taskData);\n      taskEventEmitter.emit('taskUpdated');\n      return response;\n    } catch (error) {\n      console.error('Ошибка при обновлении задачи:', error);\n      throw error;\n    }\n  });\n  return _updateTaskStatus.apply(this, arguments);\n}\nexport var validateFormData = function validateFormData(formData) {\n  var requiredFields = ['selectedService', 'paymentMethod', 'cost', 'startDate', 'endDate', 'startDateTime', 'endDateTime', 'selectedEmployee', 'selectedResponsible', 'fullnameClient'];\n  if (requiredFields.some(function (field) {\n    return !formData[field];\n  })) {\n    alert('Пожалуйста, заполните все обязательные поля.');\n    return false;\n  }\n  return true;\n};\nvar formatTaskData = function formatTaskData(formData) {\n  return _objectSpread(_objectSpread({}, formData), {}, {\n    start_date: formData.startDate ? formatISO(formData.startDate) : undefined,\n    end_date: formData.endDate ? formatISO(formData.endDate) : undefined,\n    start_time: formData.startDateTime ? format(formData.startDateTime, 'HH:mm') : undefined,\n    end_time: formData.endDateTime ? format(formData.endDateTime, 'HH:mm') : undefined,\n    employees: formData.selectedEmployee.join(','),\n    services: formData.selectedService.join(',')\n  });\n};\nexport var fetchOptions = function () {\n  var _ref = _asyncToGenerator(function* (dispatchFormData) {\n    try {\n      var _yield$Promise$all = yield Promise.all([axios.get('http://31.129.101.174/services'), axios.get('http://31.129.101.174/paymentmethods'), axios.get('http://31.129.101.174/employees'), axios.get('http://31.129.101.174/responsibles'), axios.get('http://31.129.101.174/clients')]),\n        _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 5),\n        servicesResponse = _yield$Promise$all2[0],\n        paymentMethodsResponse = _yield$Promise$all2[1],\n        employeesResponse = _yield$Promise$all2[2],\n        responsiblesResponse = _yield$Promise$all2[3],\n        clientsResponse = _yield$Promise$all2[4];\n      dispatchFormData({\n        type: 'UPDATE_FORM',\n        payload: {\n          serviceOptions: servicesResponse.data,\n          paymentMethodOptions: paymentMethodsResponse.data,\n          responsibleOptions: responsiblesResponse.data,\n          employeesOptions: employeesResponse.data,\n          fullnameClientOptions: clientsResponse.data.map(function (client) {\n            return client.full_name;\n          })\n        }\n      });\n    } catch (error) {\n      console.error('Ошибка при получении данных:', error);\n    }\n  });\n  return function fetchOptions(_x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var handleSaveTask = function () {\n  var _ref2 = _asyncToGenerator(function* (formData) {\n    var _formData$selectedSer;\n    if (formData.status !== 'черновик' && !validateFormData(formData)) return;\n    var serviceString = formData.selectedService.join(', ');\n    var employees = formData.employeesOptions.map(function (employee) {\n      return employee.id;\n    });\n    var formattedData = _objectSpread(_objectSpread({}, formatTaskData(_objectSpread(_objectSpread({}, formData), {}, {\n      service: serviceString\n    }))), {}, {\n      employees: formData.selectedEmployee || employees\n    });\n    var taskId = formData.id || (yield axios.post(`${SERVER_URL}/tasks`, formattedData)).data.task_id;\n    if (((_formData$selectedSer = formData.selectedService) == null ? void 0 : _formData$selectedSer.length) > 0) {\n      yield axios.post(`${SERVER_URL}/tasks/${taskId}/services`, {\n        services: formData.selectedService\n      });\n      console.log('Услуги успешно добавлены к задаче');\n    }\n    if (formData.status === 'выполнено') {\n      var _formData$selectedIma;\n      var filteredInventory = formData.selectedInventory.filter(function (item) {\n        return item.quantity > 0;\n      });\n      var inventoryData = filteredInventory.map(function (_ref3) {\n        var id = _ref3.id,\n          quantity = _ref3.quantity;\n        return {\n          inventory_id: id,\n          quantity: quantity\n        };\n      });\n      yield axios.put(`${SERVER_URL}/tasks/${taskId}/inventory`, {\n        inventory: inventoryData\n      });\n      if (((_formData$selectedIma = formData.selectedImages) == null ? void 0 : _formData$selectedIma.length) > 0) {\n        var imagesFormData = new FormData();\n        formData.selectedImages.forEach(function (imageUri, index) {\n          imagesFormData.append('photos', {\n            name: `photo_${index}.jpg`,\n            type: 'image/jpeg',\n            uri: Platform.OS === 'android' ? imageUri : imageUri.replace('file://', '')\n          });\n        });\n        yield axios.post(`${SERVER_URL}/tasks/${taskId}/photos`, imagesFormData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        console.log('Изображения успешно загружены на сервер');\n      }\n    }\n    taskEventEmitter.emit('taskUpdated');\n  });\n  return function handleSaveTask(_x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var updateDraft = function () {\n  var _ref4 = _asyncToGenerator(function* (draftId, formData) {\n    console.log('Отправляемые данные:', formData);\n    var status = formData.status,\n      payment = formData.paymentMethod,\n      cost = formData.cost,\n      startDate = formData.startDate,\n      startDateTime = formData.startDateTime,\n      endDate = formData.endDate,\n      endDateTime = formData.endDateTime,\n      responsible = formData.selectedResponsible,\n      fullname_client = formData.fullnameClient,\n      address_client = formData.addressClient,\n      phone = formData.phone,\n      description = formData.description,\n      selectedEmployee = formData.selectedEmployee,\n      selectedService = formData.selectedService;\n    var formatDateTime = function formatDateTime(date, timeFormat) {\n      return date ? format(date, timeFormat) : null;\n    };\n    var dataToSend = {\n      status: status,\n      service: selectedService.join(', '),\n      payment: payment,\n      cost: cost,\n      start_date: formatDateTime(startDate, 'yyyy-MM-dd'),\n      start_time: formatDateTime(startDateTime, 'HH:mm'),\n      end_date: formatDateTime(endDate, 'yyyy-MM-dd'),\n      end_time: formatDateTime(endDateTime, 'HH:mm'),\n      responsible: responsible,\n      fullname_client: fullname_client,\n      address_client: address_client,\n      phone: phone,\n      description: description,\n      employees: selectedEmployee.join(','),\n      services: selectedService\n    };\n    console.log('dataToSend данные:', dataToSend);\n    try {\n      var response = yield axios.put(`${SERVER_URL}/tasks/${draftId}`, dataToSend);\n      console.log('Черновик успешно обновлен. Данные ответа:', response.data);\n    } catch (error) {\n      console.error('Ошибка при обновлении черновика:', error);\n    }\n  });\n  return function updateDraft(_x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["axios","formatISO","format","SERVER_URL","taskEventEmitter","updateTaskStatus","_x","_x2","_updateTaskStatus","apply","arguments","_asyncToGenerator","taskId","taskData","response","put","emit","error","console","validateFormData","formData","requiredFields","some","field","alert","formatTaskData","_objectSpread","start_date","startDate","undefined","end_date","endDate","start_time","startDateTime","end_time","endDateTime","employees","selectedEmployee","join","services","selectedService","fetchOptions","_ref","dispatchFormData","_yield$Promise$all","Promise","all","get","_yield$Promise$all2","_slicedToArray","servicesResponse","paymentMethodsResponse","employeesResponse","responsiblesResponse","clientsResponse","type","payload","serviceOptions","data","paymentMethodOptions","responsibleOptions","employeesOptions","fullnameClientOptions","map","client","full_name","_x3","handleSaveTask","_ref2","_formData$selectedSer","status","serviceString","employee","id","formattedData","service","post","task_id","length","log","_formData$selectedIma","filteredInventory","selectedInventory","filter","item","quantity","inventoryData","_ref3","inventory_id","inventory","selectedImages","imagesFormData","FormData","forEach","imageUri","index","append","name","uri","Platform","OS","replace","headers","_x4","updateDraft","_ref4","draftId","payment","paymentMethod","cost","responsible","selectedResponsible","fullname_client","fullnameClient","address_client","addressClient","phone","description","formatDateTime","date","timeFormat","dataToSend","_x5","_x6"],"sources":["C:/Users/fred/Desktop/client/src/utils/taskScreenHelpers.js"],"sourcesContent":["import axios from 'axios';\r\nimport { formatISO, format } from 'date-fns';\r\nimport { SERVER_URL } from '../utils/tasks';\r\nimport { taskEventEmitter } from '../Events';\r\n\r\nexport async function updateTaskStatus(taskId, taskData) {\r\n    try {\r\n        const response = await axios.put(`${SERVER_URL}/tasks/${taskId}`, taskData);\r\n        taskEventEmitter.emit('taskUpdated');\r\n        return response;\r\n    } catch (error) {\r\n        console.error('Ошибка при обновлении задачи:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n\r\nexport const validateFormData = (formData) => {\r\n    const requiredFields = ['selectedService', 'paymentMethod', 'cost', 'startDate', 'endDate', 'startDateTime', 'endDateTime', 'selectedEmployee', 'selectedResponsible', 'fullnameClient'];\r\n    if (requiredFields.some(field => !formData[field])) {\r\n        alert('Пожалуйста, заполните все обязательные поля.');\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nconst formatTaskData = (formData) => {\r\n    return {\r\n        ...formData,\r\n        start_date: formData.startDate ? formatISO(formData.startDate) : undefined,\r\n        end_date: formData.endDate ? formatISO(formData.endDate) : undefined,\r\n        start_time: formData.startDateTime ? format(formData.startDateTime, 'HH:mm') : undefined,\r\n        end_time: formData.endDateTime ? format(formData.endDateTime, 'HH:mm') : undefined,\r\n        employees: formData.selectedEmployee.join(','),\r\n        services: formData.selectedService.join(','),\r\n    };\r\n};\r\n\r\n\r\nexport const fetchOptions = async (dispatchFormData) => {\r\n    try {\r\n        const [servicesResponse, paymentMethodsResponse, employeesResponse, responsiblesResponse, clientsResponse] = await Promise.all([\r\n            axios.get('http://31.129.101.174/services'),\r\n            axios.get('http://31.129.101.174/paymentmethods'),\r\n            axios.get('http://31.129.101.174/employees'),\r\n            axios.get('http://31.129.101.174/responsibles'),\r\n            axios.get('http://31.129.101.174/clients')\r\n        ]);\r\n        dispatchFormData({\r\n            type: 'UPDATE_FORM',\r\n            payload: {\r\n                serviceOptions: servicesResponse.data,\r\n                paymentMethodOptions: paymentMethodsResponse.data,\r\n                responsibleOptions: responsiblesResponse.data,\r\n                employeesOptions: employeesResponse.data,\r\n                fullnameClientOptions: clientsResponse.data.map(client => client.full_name)\r\n            }\r\n        });\r\n    } catch (error) {\r\n        console.error('Ошибка при получении данных:', error);\r\n    }\r\n};\r\n\r\nexport const handleSaveTask = async (formData) => {\r\n    if (formData.status !== 'черновик' && !validateFormData(formData)) return;\r\n\r\n    const serviceString = formData.selectedService.join(', ');\r\n    const employees = formData.employeesOptions.map(employee => employee.id);\r\n\r\n    const formattedData = {\r\n        ...formatTaskData({ ...formData, service: serviceString }),\r\n        employees: formData.selectedEmployee || employees\r\n    };\r\n\r\n    const taskId = formData.id || (await axios.post(`${SERVER_URL}/tasks`, formattedData)).data.task_id;\r\n\r\n    if (formData.selectedService?.length > 0) {\r\n        await axios.post(`${SERVER_URL}/tasks/${taskId}/services`, { services: formData.selectedService });\r\n        console.log('Услуги успешно добавлены к задаче');\r\n    }\r\n\r\n    if (formData.status === 'выполнено') {\r\n        const filteredInventory = formData.selectedInventory.filter(item => item.quantity > 0);\r\n        const inventoryData = filteredInventory.map(({ id, quantity }) => ({ inventory_id: id, quantity }));\r\n\r\n        await axios.put(`${SERVER_URL}/tasks/${taskId}/inventory`, { inventory: inventoryData });\r\n\r\n        if (formData.selectedImages?.length > 0) {\r\n            const imagesFormData = new FormData();\r\n            formData.selectedImages.forEach((imageUri, index) => {\r\n                imagesFormData.append('photos', {\r\n                    name: `photo_${index}.jpg`,\r\n                    type: 'image/jpeg',\r\n                    uri: Platform.OS === 'android' ? imageUri : imageUri.replace('file://', ''),\r\n                });\r\n            });\r\n            await axios.post(`${SERVER_URL}/tasks/${taskId}/photos`, imagesFormData, {\r\n                headers: { 'Content-Type': 'multipart/form-data' },\r\n            });\r\n            console.log('Изображения успешно загружены на сервер');\r\n        }\r\n    }\r\n\r\n    taskEventEmitter.emit('taskUpdated');\r\n};\r\n\r\nexport const updateDraft = async (draftId, formData) => {\r\n    console.log('Отправляемые данные:', formData);\r\n\r\n    const {\r\n        status, paymentMethod: payment, cost, startDate, startDateTime, endDate, endDateTime,\r\n        selectedResponsible: responsible, fullnameClient: fullname_client, addressClient: address_client,\r\n        phone, description, selectedEmployee, selectedService\r\n    } = formData;\r\n\r\n    const formatDateTime = (date, timeFormat) => date ? format(date, timeFormat) : null;\r\n\r\n    const dataToSend = {\r\n        status,\r\n        service: selectedService.join(', '),\r\n        payment,\r\n        cost,\r\n        start_date: formatDateTime(startDate, 'yyyy-MM-dd'),\r\n        start_time: formatDateTime(startDateTime, 'HH:mm'),\r\n        end_date: formatDateTime(endDate, 'yyyy-MM-dd'),\r\n        end_time: formatDateTime(endDateTime, 'HH:mm'),\r\n        responsible,\r\n        fullname_client,\r\n        address_client,\r\n        phone,\r\n        description,\r\n        employees: selectedEmployee.join(','),\r\n        services: selectedService,\r\n    };\r\n\r\n    console.log('dataToSend данные:', dataToSend);\r\n\r\n    try {\r\n        const response = await axios.put(`${SERVER_URL}/tasks/${draftId}`, dataToSend);\r\n        console.log('Черновик успешно обновлен. Данные ответа:', response.data);\r\n    } catch (error) {\r\n        console.error('Ошибка при обновлении черновика:', error);\r\n    }\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}